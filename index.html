<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Ms. Mona Kamal | English Academy</title>
    
    <!-- PWA -->
<link rel="manifest" href="/mona-academy/manifest.json">
    <meta name="theme-color" content="#6c5ce7">
    
    <!-- Preload fonts and css -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Translations -->
    <script src="translations.js"></script>
    
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    </noscript>
    
    <!-- Preload hero image -->
    <link rel="preload" as="image" href="mona.jpg">
</head>
<body>
    <header>
        <div class="logo-text" onclick="goHome()">MS. MONA KAMAL</div>
        <div class="header-controls">
            <button class="lang-toggle" onclick="switchLanguage(currentLang === 'ar' ? 'en' : 'ar')">
                <i class="fas fa-globe"></i> <span data-i18n="language">ุงูุนุฑุจูุฉ</span>
            </button>
            <button class="dark-toggle" onclick="toggleTheme()">
                <i class="fas fa-moon"></i> <span data-i18n="darkMode">ุงููุถุน ุงููููู</span>
            </button>
            <div id="authStatus"></div>
        </div>
    </header>

    <!-- HAMBURGER DROPDOWN -->
    <div id="menuDropdown" class="dropdown-menu">
        <a onclick="openDashboard()"><i class="fas fa-tachometer-alt" style="margin-left: 10px;"></i> <span data-i18n="dashboard">ููุญุฉ ุงูุชุญูู</span></a>
        <a onclick="goHome()"><i class="fas fa-home" style="margin-left: 10px;"></i> <span data-i18n="home">ุงูุฑุฆูุณูุฉ</span></a>
        <a onclick="openDashboard()"><i class="fas fa-play-circle" style="margin-left: 10px;"></i> <span data-i18n="continueWatching">ูุชุงุจุนุฉ ุงููุดุงูุฏุฉ</span></a>
        <hr>
        <a onclick="logout()" style="color: var(--danger);"><i class="fas fa-sign-out-alt" style="margin-left: 10px;"></i> <span data-i18n="logout">ุชุณุฌูู ุงูุฎุฑูุฌ</span></a>
    </div>

    <!-- SUBSCRIPTION MODAL -->
    <div id="subscriptionModal" class="subscription-modal">
        <div class="subscription-content">
            <i class="fas fa-times-circle" style="position: absolute; left: 20px; top: 20px; font-size: 1.5rem; color: #ccc; cursor: pointer;" onclick="closeSubscriptionModal()"></i>
            <h2 style="color: var(--main); margin-bottom: 20px;">๐ฏ ุงุดุชุฑู ูู ุงูููุฑุณ</h2>
            <div id="subCourseInfo" style="font-size: 1.2rem; font-weight: bold; margin-bottom: 20px;"></div>
            <div class="sub-option">
                <button id="previewBtn" class="sub-btn">๐๏ธ <span data-i18n="preview">ูุดุงูุฏุฉ ุงููุญุชูู</span></button>
                <button id="subscribeBtn" class="sub-btn primary">โ <span data-i18n="subscribe">ุงุดุชุฑุงู</span></button>
            </div>
            <div id="subscriptionIdSection" style="display: none;">
                <p style="color: #666; margin-bottom: 10px;" data-i18n="enterStudentId">ุฃุฏุฎู ููุฏ ุงูุทุงูุจ ุงูุฎุงุต ุจู (ID) ูุชุฃููุฏ ุงูุงุดุชุฑุงู:</p>
                <input type="text" id="subscriptionIdInput" class="id-input" placeholder="1234567890" maxlength="10">
                <button id="confirmSubscribeBtn" class="auth-btn" style="width: 100%; margin-top: 10px; background: var(--main); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer;" onclick="confirmSubscription()"><span data-i18n="confirm">ุชุฃููุฏ ุงูุงุดุชุฑุงู</span></button>
                <div id="subError" style="color: var(--danger); margin-top: 10px; font-size: 0.9rem;"></div>
            </div>
        </div>
    </div>

    <!-- HOME PAGE -->
    <div id="homePage">
        <section class="hero">
            <div class="hero-content">
                <h1><span data-i18n="heroTitle">Learn English with</span> <br> Ms. Mona Kamal</h1>
                <p data-i18n="heroSubtitle">Welcome to your second home! Everything you need to excel is right here.</p><br>
                <a href="#courses" class="btn-hero" style="background: #fff; color: var(--main); padding: 15px 35px; border-radius: 50px; text-decoration: none; font-weight: 900;" data-i18n="viewCourses">View Courses</a>
            </div>
            <div class="hero-image"><img src="mona.jpg" alt="Ms. Mona Kamal" width="300" height="300"></div>
        </section>

        <section class="about-section">
            <span class="about-tag" data-i18n="aboutMe">About Me</span>
            <div class="about-content">
                <h2 data-i18n="whoIsMona">Who is Ms. Mona Kamal?</h2>
                <p data-i18n="aboutText">Ms. Mona Kamal is a professional English language instructor dedicated to making English learning an enjoyable and rewarding experience.</p>
            </div>
        </section>
        
        <section class="features">
            <h2 data-i18n="whyUs">ููุงุฐุง ุชุดุชุฑู ูุนูุงุ โจ</h2>
            <div class="features-grid">
                <div class="feat-card"><div class="num-circle">1</div><h3 data-i18n="features.1">ุดุฑุญ ูุจุณุท</h3><p data-i18n="features.1.desc">ุจูุญูู ูู ูุงุนุฏุฉ ููู ูููุฉ ูู ุงููููุฌ ุจุฃุณููุจ ููุชุน.</p></div>
                <div class="feat-card"><div class="num-circle">2</div><h3 data-i18n="features.2">ุชูููููุฌูุง ุชุนููููุฉ</h3><p data-i18n="features.2.desc">ููุฏูููุงุช ุจุฌูุฏุฉ ุนุงููุฉ ูููุตุฉ ุณููุฉ ุชูุธู ูู ูุฐุงูุฑุชู.</p></div>
                <div class="feat-card"><div class="num-circle">3</div><h3 data-i18n="features.3">ูุชุงุจุนุฉ ูุณุชูุฑุฉ</h3><p data-i18n="features.3.desc">ุฅุญูุง ูุนุงู ุฎุทูุฉ ุจุฎุทูุฉ ููุฑุฏ ุนูู ุงุณุชูุณุงุฑุงุชู.</p></div>
            </div>
        </section>

        <section class="courses" id="courses">
            <h2 style="text-align: center; margin-bottom: 40px; font-weight: 900;" data-i18n="ourCourses">ููุฑุณุงุชูุง ุงูุชุนููููุฉ</h2>
            <div id="foldersGrid" class="course-grid"></div>
        </section>

        <!-- PERFECT SCORES SECTION -->
        <section id="perfectScoresSection" class="perfect-section" style="display: none;">
            <div class="perfect-header">
                <i class="fas fa-trophy"></i>
                <h2 data-i18n="perfectScores">ุทูุงุจ ุงูุฏุฑุฌุฉ ุงูููุงุฆูุฉ ๐</h2>
                <i class="fas fa-star"></i>
            </div>
            <div id="perfectScoresGrid" class="perfect-grid"></div>
            <audio id="successSound" class="sound-on-load" preload="auto">
                <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" type="audio/mpeg">
            </audio>
        </section>

        <!-- LEADERBOARD SECTION -->
        <section id="leaderboardSection" class="leaderboard-section" style="display: none;">
            <h2 class="section-title">๐ <span data-i18n="leaderboard">ููุญุฉ ุงููุชุตุฏุฑูู</span></h2>
            <div id="leaderboardContainer" class="leaderboard-table"></div>
        </section>

        <section class="reviews">
            <h2 style="margin-bottom: 40px; font-weight: 900;" data-i18n="reviews">ูุงููุง ุนู Ms. Mona Kamal โจ</h2>
            <div class="reviews-grid" id="testiGrid"></div>
            <div id="reviewSectionContainer"></div>
        </section>
    </div>

    <!-- COURSE CONTENT AREA -->
    <div id="contentArea" style="display: none;">
        <button onclick="goHome()" style="background:#f0eeff; color:var(--main); border:none; padding:10px 25px; border-radius:15px; cursor:pointer; font-weight:bold; margin-bottom:25px; font-family:'Cairo';">
            <i class="fas fa-arrow-right"></i> <span data-i18n="backHome">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</span>
        </button>
        <h2 id="folderTitleName" style="margin-bottom:30px; color:var(--dark); text-align:center; font-weight: 900;"></h2>
        
        <!-- Rating Section (will be injected by JS) -->
        <div id="courseRatingSection" class="rating-box" style="display: none;"></div>
        
        <div id="combinedGrid" class="content-grid"></div>
    </div>

    <!-- STUDENT DASHBOARD -->
    <div id="studentDashboard" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <button onclick="goHome()" style="background:#f0eeff; color:var(--main); border:none; padding:10px 25px; border-radius:15px; cursor:pointer; font-weight:bold; font-family:'Cairo';">
                <i class="fas fa-arrow-right"></i> <span data-i18n="backHome">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</span>
            </button>
            <div class="student-id-badge" id="dashboardStudentId"></div>
        </div>
        
        <div class="dashboard-header">
            <div class="student-welcome">
                <h1><span data-i18n="welcome">ูุฑุญุจุงู</span> <span id="studentNameDashboard">...</span>! ๐</h1>
                <p style="color: #666;" data-i18n="dashboardSubtitle">ูู ููุง ุชุดูู ูู ููุฑุณุงุชู ูุชูุฏูู ููุชุงุฆุฌู</p>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="statCourses">0</div>
                <div class="stat-label" data-i18n="stats.courses">ุงูููุฑุณุงุช ุงููุดุชุฑู ูููุง</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statVideos">0</div>
                <div class="stat-label" data-i18n="stats.videos">ููุฏูู ุชูุช ูุดุงูุฏุชู</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statExams">0</div>
                <div class="stat-label" data-i18n="stats.exams">ุงูุชุญุงู ุชู ุญูู</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statAvgScore">0%</div>
                <div class="stat-label" data-i18n="stats.avgScore">ูุชูุณุท ุงูุฏุฑุฌุงุช</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statPoints">0</div>
                <div class="stat-label" data-i18n="points">ููุงุท</div>
            </div>
        </div>

        <!-- Badges -->
        <div id="badgesContainer" class="badges-container"></div>

        <!-- Continue Watching -->
        <h2 class="section-title" data-i18n="continueWatchingTitle">โถ๏ธ ูุชุงุจุนุฉ ุงููุดุงูุฏุฉ</h2>
        <div id="continueWatchingGrid" class="content-grid"></div>

        <h2 class="section-title" data-i18n="myCourses">๐ ููุฑุณุงุชู ุงููุดุชุฑู ูููุง</h2>
        <div id="myCoursesGrid" class="course-grid"></div>

        <h2 class="section-title" data-i18n="recentExams">๐ ุขุฎุฑ ุงูุงูุชุญุงูุงุช</h2>
        <div id="recentExamsList"></div>

        <h2 class="section-title" data-i18n="recentVideos">๐ฌ ุขุฎุฑ ุงูููุฏูููุงุช ูุดุงูุฏุฉ</h2>
        <div id="recentVideosList"></div>
    </div>

    <!-- QUIZ / VIDEO OVERLAY -->
    <div id="quizOverlay">
        <div class="quiz-header">
            <h2 id="quizTitle" style="font-weight: 900; color: var(--main);"></h2>
            <button onclick="closeQuiz()" style="background:var(--danger); color:white; border:none; padding:8px 20px; border-radius:10px; cursor:pointer; font-weight:bold; font-family:'Cairo';"><span data-i18n="close">ุฅุบูุงู</span></button>
        </div>
        <div id="quizContainer" style="max-width: 800px; margin: 0 auto; padding-bottom: 100px;"></div>
    </div>

    <!-- LOGIN & REGISTRATION MODAL -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeLogin()">&times;</span>
            <div id="authChoice">
                <h2 style="color:var(--main); margin-bottom:20px;" data-i18n="welcomeTitle">ูุฑุญุจุงู ุจู ๐</h2>
                <button class="auth-btn" onclick="showAuthForm('loginChoice')" style="width:100%; margin-bottom:10px; background:var(--main); color:white; border:none; padding:12px; border-radius:12px; font-weight:bold; cursor:pointer;"><span data-i18n="login">ุชุณุฌูู ุงูุฏุฎูู</span></button>
                <button class="auth-btn" onclick="showAuthForm('register')" style="background:#fff; color:var(--main); border:2px solid var(--main); width:100%; margin-bottom:10px; padding:12px; border-radius:12px; font-weight:bold; cursor:pointer;"><span data-i18n="register">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</span></button>
            </div>
            <div id="loginChoice" style="display:none;">
                <h2 style="color:var(--main); margin-bottom:20px;" data-i18n="chooseLoginMethod">ุงุฎุชุฑ ุทุฑููุฉ ุชุณุฌูู ุงูุฏุฎูู</h2>
                <button class="auth-btn" onclick="showAuthForm('loginEmail')" style="width:100%; margin-bottom:10px; background:var(--main); color:white; border:none; padding:12px; border-radius:12px; font-weight:bold; cursor:pointer;"><span data-i18n="loginEmail">ุงูุฏุฎูู ุจุงูุฅูููู ูุงูุจุงุณูุฑุฏ</span></button>
                <button class="auth-btn" onclick="showAuthForm('loginUsername')" style="background:#fff; color:var(--main); border:2px solid var(--main); width:100%; margin-bottom:10px; padding:12px; border-radius:12px; font-weight:bold; cursor:pointer;"><span data-i18n="loginUsername">ุงูุฏุฎูู ุจุงูููุฒุฑ ููู ูุงูุจุงุณูุฑุฏ</span></button>
                <button class="auth-btn" onclick="loginGoogle()" style="background:#fff; color:#444; border:1px solid #ddd; width:100%; display:flex; align-items:center; justify-content:center; gap:10px; cursor:pointer; padding:12px; border-radius:12px; font-weight:bold;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" width="20" alt="Google"> <span data-i18n="loginGoogle">ุงูุฏุฎูู ุจูุงุณุทุฉ ุฌูุฌู</span>
                </button>
                <p onclick="showAuthForm('choice')" style="margin-top:15px; cursor:pointer; font-size:0.8rem; color:var(--main);" data-i18n="back">ุงูุนูุฏุฉ ููุฎูู</p>
            </div>
            <!-- ุจุงูู ูุญุชูู ุงูููุฏุงู (ููุง ูู ูุน ุฅุถุงูุฉ data-i18n) -->
            <!-- ุชู ุงุฎุชุตุงุฑู ููุทูู ุงููุงูู ููุฌูุฏ ูู ุงููุณุฎุฉ ุงูููุงุฆูุฉ -->
        </div>
    </div>

    <!-- WHATSAPP MODAL -->
    <div id="waModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;" data-i18n="contactMsMona">ุชูุงุตู ูุน Ms. Mona</h3>
            <a href="https://wa.me/201018591244" class="social-btn wa" style="display:block; margin-bottom:10px;" target="_blank">01018591244</a>
            <a href="https://wa.me/201128874885" class="social-btn wa" style="display:block;" target="_blank">01128874885</a>
            <button onclick="document.getElementById('waModal').style.display='none'" style="margin-top: 15px; border: none; background: none; color: var(--danger); cursor: pointer; font-family:'Cairo';" data-i18n="close">ุฅุบูุงู</button>
        </div>
    </div>

    <footer>
        <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ ูขููขูฆ | <strong>Ms. Mona Kamal</strong></p>
        <div style="margin-top: 20px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <a href="https://www.facebook.com/share/1C9MoP8pqj/" class="social-btn fb" target="_blank">
                <i class="fab fa-facebook-f" style="margin-left: 5px;"></i> ููุณุจูู
            </a>
            <div class="social-btn wa" onclick="document.getElementById('waModal').style.display='flex'">
                <i class="fab fa-whatsapp" style="margin-left: 5px;"></i> ูุงุชุณุงุจ
            </div>
            <a href="https://wa.me/201062306872" class="social-btn developer-btn" target="_blank">
                <i class="fas fa-code" style="margin-left: 5px;"></i> Developed by Abdelrahman
            </a>
        </div>
    </footer>

    <script type="module" src="script.js" defer></script>
    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/mona-academy/sw.js')
        .then(reg => console.log('โ PWA Service Worker registered'))
        .catch(err => console.log('โ SW registration failed:', err));
    });
  }
</script>
</body>
</html>